# CHAT BY Dmitriev Sergey for WinDI_Tech_Spec

## Запуск приложения

1. `docker compose up -d` - сбилдить образ приложения, поднять его, поднять образ PSQL

2. Далее нужно накатить миграции и загрузки тестовых данных войдём в bash системы, поднятой в контейнере. Для этого `docker ps -a` и контейнер с названием `dmitriev_chat_api`. Скопируйте его CONTAINER ID. Далее введите команду `docker exec -it *вставить CONTAINER ID* bash`. Вы окажетесь в командной оболочке контейнера в рабочей директории `/code`. Введите `cd src/` и перейдите в основную директорию проекта.

2.2 Для накатки миграций введите `alembic upgrade head`. Если после этого вам для какой-то цели нужно будет откатить миграции обратно, то выполните `alembic downgrade -1` - на данный момент миграция только одна. 

2.3 Для загрузки в базу тестовых данных введите `python load_data.py`. База будет приведена в состояние, в котором существуют 3 пользователя: Sergey, Arina, Vlad. Пароль для каждой учётной записи одинаковый: 12345

3. Для синхронизации информации, которая хранится персистентно с информацией, хранимой оперативно, необходимо сделать запрос GET /chat/sync/persistent
Это может быть нужно после перезапуска приложения или после загрузки тестовых данных, и всякий раз, когда данные о чат-команатах по какой-либо причине могли быть утеряны из оперативной памяти
